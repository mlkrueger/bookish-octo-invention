name: List Subdirectories
on:
  workflow_call:
    inputs:
      parent:
        required: true
        type: string
    outputs:
      folders: ${{ steps.set-folders.outputs.folders }}

permissions:
  contents: read
jobs:
  build:
    outputs:
      folders: ${{ steps.set-folders.outputs.folders }}
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - run: sudo apt update && sudo apt install tree jq -y
      shell: bash
    - id: set-folders
      shell: bash
      run: |
        echo "Finding subdirectories"
        cd ${{ inputs.parent }}
        folders=$(tree -J -d -L 1 | jq -c '.[0].contents | map(.name)')
        echo $folders
        echo "folders=$folders" >> $GITHUB_OUTPUT
      
